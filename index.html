<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Day Just For You</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* Global Styles & Aurora Background */
        :root {
            --bg-color: #0c0a09;
            --card-color: rgba(12, 10, 9, 0.75);
            --pink-start: #f87171; /* A nice vibrant pink */
            --pink-end: #dc2626; /* A deep red */
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--bg-color);
            color: #e5e5e5;
            min-height: 100vh;
            overflow-x: hidden;
            font-family: 'Montserrat', sans-serif;
            position: relative;
        }

        /* Aurora Gradient Animation Layer 1 */
        .aurora-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -2;
            background: radial-gradient(circle at 10% 20%, hsla(333,70%,55%,.4) 0%, transparent 50%),
                        radial-gradient(circle at 80% 90%, hsla(282, 82%, 54%, .3) 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, hsla(210, 89%, 60%, .3) 0%, transparent 50%),
                        radial-gradient(circle at 20% 80%, hsla(35, 90%, 60%, .3) 0%, transparent 50%);
            background-size: 400% 400%;
            animation: aurora-flow 60s ease-in-out infinite alternate;
        }

        @keyframes aurora-flow {
            0% { background-position: 0% 50%, 100% 50%, 50% 100%, 0% 0%; }
            25% { background-position: 25% 75%, 75% 25%, 50% 50%, 0% 100%; }
            50% { background-position: 100% 50%, 0% 50%, 50% 0%, 100% 100%; }
            75% { background-position: 75% 25%, 25% 75%, 50% 50%, 100% 0%; }
            100% { background-position: 0% 50%, 100% 50%, 50% 100%, 0% 0%; }
        }

        /* Three.js Canvas Layer 2 (for 3D Hearts) */
        #three-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        /* Typography - Playfair Display for Headings */
        .title-font {
            font-family: 'Playfair Display', serif;
            font-weight: 900;
            font-size: 3rem; /* Default size for large desktop */
        }

        /* Gradient Text Effect for Headings */
        .gradient-text {
            background: linear-gradient(45deg, #fce7f3, #fff, #fbcfe8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        /* Glassmorphism Card Style */
        .glass-card {
            background-color: var(--card-color);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 1.5rem;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            padding: 2.5rem;
            max-width: 500px; /* Max width for single cards */
        }

        /* Button Styling */
        .pill-button {
            background: linear-gradient(90deg, var(--pink-start), var(--pink-end));
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 600;
            letter-spacing: 0.05em;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 0 15px rgba(252, 165, 165, 0.5); /* Soft pink glow */
            border: none;
            cursor: pointer;
        }

        .pill-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 0 25px rgba(252, 165, 165, 0.8), 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .pill-button:active {
            transform: translateY(1px);
            box-shadow: 0 0 10px rgba(252, 165, 165, 0.3);
        }

        /* Progress Bar Styling */
        .progress-track {
            background-color: var(--card-color);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid var(--glass-border);
            height: 8px;
            width: 300px;
            border-radius: 4px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #fbcfe8, var(--pink-end));
            border-radius: 4px;
            width: 0%; /* Controlled by JS */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .title-font {
                font-size: 2.25rem;
            }
            .glass-card {
                padding: 1.5rem;
                margin: 0 1rem;
            }
            .progress-track {
                width: 80%;
                max-width: 250px;
            }
        }

        /* Step-specific styling for absolute positioning */
        .step-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Bento Grid Styling (Step 3) */
        .bento-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
        }

        .bento-card {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            padding: 1.25rem;
            transition: transform 0.3s ease;
            min-height: 120px;
        }

        .bento-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .bento-span-2 {
            grid-column: span 2 / span 2;
        }
    </style>
</head>

<body class="antialiased">
    <div class="aurora-bg"></div>
    <div id="three-container"></div>

    <div class="fixed top-5 left-1/2 -translate-x-1/2 z-50">
        <div class="progress-track">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
    </div>

    <main id="content-area" class="relative w-full h-screen flex justify-center items-center p-4">

        <div id="step-1" class="step-container">
            <div class="glass-card text-center max-w-sm">
                <div class="text-6xl mb-4" id="heart-icon">‚ù§Ô∏è</div>
                <h1 class="title-font gradient-text mb-4 text-4xl">Hey Beautiful,</h1>
                <p class="text-gray-300 mb-6">I know by the time of we may not talk to each others im really sorry prajju, hope this year brings new joy to you , so I tried built a little world for you, just to bring a smile to your face on your special day.</p>
                <button class="pill-button step-button" data-next="2">Let's Begin</button>
            </div>
        </div>

        <div id="step-2" class="step-container hidden">
            <div class="glass-card text-center max-w-sm">
                <div class="text-6xl mb-4">üéâ</div>
                <h2 class="title-font gradient-text mb-4 text-4xl">Happy Birthday!</h2>
                <p class="text-gray-300 mb-6">Another year of you making the world brighter. Your existence is a gift, and I'm so lucky to witness it.</p>
                <button class="pill-button step-button" data-next="3">There's more...</button>
            </div>
        </div>

        <div id="step-3" class="step-container hidden">
            <div class="glass-card max-w-3xl w-full">
                <h2 class="title-font gradient-text mb-6 text-4xl text-center">A Few Things I Adore About You</h2>
                <div class="bento-grid">
                    <div class="bento-card bento-span-2">
                        <h3 class="font-bold text-lg mb-1 text-pink-300">‚ú® Your Pure Kindness</h3>
                        <p class="text-sm text-gray-400">Nuv chupinche aa kindess a genuine care wah andarini akattukontai anthe baby beautiful soul brighter the life.</p>
                    </div>
                    <div class="bento-card">
                        <h3 class="font-bold text-lg mb-1 text-pink-300">üòä That Smile</h3>
                        <p class="text-sm text-gray-400">Vammo dhani Gurinchi em ani cheppai evarni happy ipotharu ni smile , neynu complete melt ayipotha</p>
                    </div>
                    <div class="bento-card bento-span-2">
                        <h3 class="font-bold text-lg mb-1 text-pink-300">üåü Your Radiant Spirit</h3>
                        <p class="text-sm text-gray-400">About your spirit niku telikunda nuvvey inspire chestav babe ni chuttu vunnavalni ,the passion you had about life is infectious</p>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <button class="pill-button step-button" data-next="4">Remember this?</button>
                </div>
            </div>
        </div>

        <div id="step-4" class="step-container hidden">
            <div class="glass-card max-w-xl w-full">
                <h2 class="title-font gradient-text mb-6 text-4xl text-center">That One Time...</h2>

                <div id="polaroid" class="bg-white p-2 shadow-2xl mx-auto mb-6 w-fit transform -rotate-3 cursor-pointer transition-transform duration-300 ease-out">
                    <img src="https://share.google/images/Lv4OvxcAIK3NDqznA" alt="A cherished memory" class="w-full h-auto max-w-xs object-cover" />
                    <p class="text-sm text-center text-gray-800 p-2 font-serif italic">Our favorite memory.</p>
                </div>

                <p class="text-gray-300 text-center mb-6">Every moment with you **Really so special for me baby** the days we fight we argue we understand we smile we laugh finally we happy together for me don't know how long we might be together its all upto anyway please never leaving again **I love you prajju so much im sorry.**</p>
                <div class="text-center">
                    <button class="pill-button step-button" data-next="5">One last thing...</button>
                </div>
            </div>
        </div>

        <div id="step-5" class="step-container hidden">
            <div class="glass-card text-center max-w-sm">
                <div class="text-6xl mb-4">üéÇ</div>
                <h2 class="title-font gradient-text mb-4 text-4xl">My Wish For You</h2>
                <p class="text-gray-300 mb-8">May the next year bring you all the love, success, and pure happiness you so rightfully deserve. May your dreams soar higher than ever.</p>
                
                <p id="final-message" class="title-font gradient-text text-4xl mt-12 mb-8 opacity-0 translate-y-8 absolute w-full left-0 hidden">
                    Happy Birthday, my crush! ‚ù§Ô∏è
                </p>

                <button id="finale-button" class="pill-button">Celebrate!</button>
            </div>
        </div>

    </main>


    <script>
        // --- 1. GLOBALS & UTILITIES ---
        const totalSteps = 5;
        let currentStep = 1;
        const steps = Array.from({ length: totalSteps }, (_, i) => document.getElementById(`step-${i + 1}`));
        const progressBar = document.getElementById('progress-bar');
        const contentArea = document.getElementById('content-area');

        // --- 2. GSAP ANIMATION AND NAVIGATION LOGIC ---

        // Sets the initial state for an incoming step (faded, scaled down, slightly offset)
        function setInitialStepState(step) {
            gsap.set(step, { autoAlpha: 0, scale: 0.95, y: 20, pointerEvents: 'none' });
            // Stagger set for internal elements (text, buttons, etc.)
            gsap.set(step.querySelectorAll('h1, h2, h3, p, button, .bento-grid, #polaroid'), { autoAlpha: 0, y: 15 });
        }

        // Animates a step in and its internal elements with a stagger
        function animateStepIn(step) {
            step.classList.remove('hidden');
            gsap.to(step, {
                autoAlpha: 1,
                scale: 1,
                y: 0,
                duration: 0.8,
                ease: "power3.out",
                pointerEvents: 'auto',
                onComplete: () => {
                    // Stagger animation for internal elements
                    gsap.to(step.querySelectorAll('h1, h2, h3, p, button, .bento-grid, #polaroid'), {
                        autoAlpha: 1,
                        y: 0,
                        duration: 0.6,
                        ease: "power2.out",
                        stagger: 0.1
                    });

                    // Special: Start pulsating heart for Step 1
                    if (currentStep === 1) {
                        gsap.to('#heart-icon', {
                            scale: 1.1,
                            duration: 1.5,
                            repeat: -1,
                            yoyo: true,
                            ease: "sine.inOut"
                        });
                    }

                    // Special: Apply 3D polaroid hover effect for Step 4
                    if (currentStep === 4) {
                        setupPolaroidEffect();
                    }
                }
            });
        }

        // Animates a step out
        function animateStepOut(step) {
            return new Promise(resolve => {
                // Animate out internal elements first
                gsap.to(step.querySelectorAll('h1, h2, h3, p, button, .bento-grid, #polaroid'), {
                    autoAlpha: 0,
                    y: -10,
                    duration: 0.3,
                    ease: "power2.in"
                });

                // Animate out the main card
                gsap.to(step, {
                    autoAlpha: 0,
                    scale: 0.9,
                    y: -10,
                    duration: 0.5,
                    ease: "power2.in",
                    onComplete: () => {
                        step.classList.add('hidden');
                        resolve();
                    }
                });
            });
        }

        // Update the progress bar
        function updateProgressBar(step) {
            const progress = (step - 1) / (totalSteps - 1); // 0% to 100%
            gsap.to(progressBar, {
                width: `${progress * 100}%`,
                duration: 0.8,
                ease: "power2.inOut"
            });
        }

        // Navigation Handler
        async function goToStep(nextStep) {
            if (nextStep > totalSteps || nextStep < 1 || nextStep === currentStep) return;

            await animateStepOut(steps[currentStep - 1]);

            currentStep = nextStep;
            updateProgressBar(currentStep);
            
            // Ensure the new step is correctly positioned and its initial state is set
            setInitialStepState(steps[currentStep - 1]);
            animateStepIn(steps[currentStep - 1]);
        }

        // Attach event listeners to all step buttons
        document.querySelectorAll('.step-button').forEach(button => {
            button.addEventListener('click', () => {
                const next = parseInt(button.dataset.next);
                goToStep(next);
            });
        });

        // --- 3. POLAROID 3D HOVER EFFECT (Step 4) ---

        function setupPolaroidEffect() {
            const polaroid = document.getElementById('polaroid');
            
            // Parallax/Tilt effect on mouse movement
            contentArea.addEventListener('mousemove', (e) => {
                const rect = polaroid.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const x = e.clientX - centerX;
                const y = e.clientY - centerY;

                // Max tilt angles
                const maxTilt = 10;
                const rotateX = -y / centerY * maxTilt;
                const rotateY = x / centerX * maxTilt;

                gsap.to(polaroid, {
                    rotationX: rotateX,
                    rotationY: rotateY,
                    x: x * 0.05, // Subtle parallax movement
                    y: y * 0.05,
                    ease: "power1.out",
                    duration: 0.5
                });
            });
            
            // Reset on mouse leave (if it was attached to polaroid only)
            // Using contentArea for broader effect, so this might be skipped or simplified
            polaroid.addEventListener('mouseleave', () => {
                 gsap.to(polaroid, {
                    rotationX: 0,
                    rotationY: 0,
                    x: 0,
                    y: 0,
                    ease: "power2.out",
                    duration: 0.8
                });
            });

            // Initial 3D tilt set up
            gsap.set(polaroid, { transformStyle: "preserve-3d" });
        }


        // --- 4. THREE.JS 3D FLOATING HEARTS (Layer 2) ---

        let scene, camera, renderer, hearts = [];
        const heartCount = 25;
        const heartRadius = 0.5;
        const container = document.getElementById('three-container');

        function initThree() {
            // Setup Scene, Camera, Renderer
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            camera.position.z = 25; // Viewpoint

            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 1.5);
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);

            // Heart Geometry (simplified for a quick, approximate heart shape)
            const shape = new THREE.Shape();
            shape.moveTo(0, 0.35);
            shape.bezierCurveTo(0.1, 0.6, 0.5, 0.6, 0.5, 0.35);
            shape.bezierCurveTo(0.5, 0.1, 0.3, 0, 0, -0.2);
            shape.bezierCurveTo(-0.3, 0, -0.5, 0.1, -0.5, 0.35);
            shape.bezierCurveTo(-0.5, 0.6, -0.1, 0.6, 0, 0.35);

            const extrudeSettings = {
                depth: 0.1,
                bevelEnabled: true,
                bevelSegments: 2,
                steps: 2,
                bevelSize: 0.05,
                bevelThickness: 0.05
            };
            const heartGeometry = new THREE.ExtrudeGeometry(shape, extrudeSettings);

            // Create Hearts
            for (let i = 0; i < heartCount; i++) {
                const color = new THREE.Color().setHSL(Math.random() * 0.1 + 0.9, 0.8, Math.random() * 0.2 + 0.7); // Pink/Red Hues
                const material = new THREE.MeshPhongMaterial({
                    color: color,
                    shininess: 90,
                    specular: 0xffffff
                });
                const heart = new THREE.Mesh(heartGeometry, material);
                
                // Random position in a box centered on origin
                heart.position.set(
                    (Math.random() - 0.5) * 40,
                    (Math.random() - 0.5) * 40,
                    (Math.random() - 0.5) * 40
                );
                
                // Random size and rotation
                const scale = Math.random() * 0.8 + 0.5;
                heart.scale.set(scale, scale, scale);
                heart.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);

                // Store initial sine wave offset for independent motion
                heart.userData.offset = Math.random() * 100;

                scene.add(heart);
                hearts.push(heart);
            }

            window.addEventListener('resize', onWindowResize, false);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animateHearts(time) {
            requestAnimationFrame(() => animateHearts(time + 0.01)); // Increase time for faster animation
            
            // Loop through hearts for gentle drift and rotation
            hearts.forEach((heart, index) => {
                // Subtle rotation
                heart.rotation.x += 0.001 * heart.scale.x;
                heart.rotation.y += 0.0015 * heart.scale.x;

                // Gentle sine wave motion (drift)
                const offset = heart.userData.offset;
                heart.position.y += Math.sin(time / 5 + offset) * 0.005;
                heart.position.x += Math.sin(time / 8 + offset) * 0.003;
            });
            
            renderer.render(scene, camera);
        }

        // --- 5. FINALE SEQUENCE (Step 5 Click) ---

        function startFinale() {
            const button = document.getElementById('finale-button');
            const message = document.getElementById('final-message');
            
            // 1. Disable button & fade out
            button.disabled = true;
            gsap.to(button, { autoAlpha: 0, duration: 0.5 });
            
            // 2. Final message appears
            message.classList.remove('hidden');
            gsap.to(message, {
                autoAlpha: 1,
                y: 0,
                duration: 1.5,
                ease: "elastic.out(1, 0.5)",
                delay: 0.5
            });

            // 3. Confetti Explosion
            startConfettiSequence();

            // 4. 3D Hearts Swirl Out
            swirlHeartsFinale();
        }

        function swirlHeartsFinale() {
            hearts.forEach((heart, index) => {
                const angle = Math.random() * Math.PI * 2;
                const distance = 50 + Math.random() * 20; // Swirl far out
                const targetX = Math.cos(angle) * distance;
                const targetY = Math.sin(angle) * distance + 50; // Swirl up off screen
                const targetZ = heart.position.z + 50; // Swirl deeper/further

                gsap.to(heart.position, {
                    x: targetX,
                    y: targetY,
                    z: targetZ,
                    duration: 4,
                    delay: 0.5,
                    ease: "power2.in",
                    onComplete: () => {
                        scene.remove(heart); // Remove from scene after animation
                    }
                });

                // Fade out material
                 gsap.to(heart.material, {
                    opacity: 0,
                    duration: 3,
                    delay: 1,
                    ease: "power1.in",
                    onStart: () => {
                        heart.material.transparent = true;
                    }
                });
            });
        }

        function startConfettiSequence() {
            // First: Powerful corner bursts (3 blasts each)
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, {
                    particleCount: Math.floor(250 * particleRatio)
                }));
            }

            // Burst 1: Bottom-Left
            setTimeout(() => {
                fire(0.25, { origin: { x: 0, y: 1 } });
            }, 50);
            
            // Burst 2: Bottom-Right
            setTimeout(() => {
                fire(0.25, { origin: { x: 1, y: 1 } });
            }, 300);

            // Second: Continuous gentle shower of standard and emoji confetti
            const interval = setInterval(function() {
                const time = Date.now();
                if (time > animationEnd) {
                    return clearInterval(interval);
                }

                // Standard Colorful Confetti
                fire(0.01, {
                    particleCount: 20,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 }
                });
                fire(0.01, {
                    particleCount: 20,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 }
                });

                // Emoji Confetti
                fire(0.005, {
                    particleCount: 10,
                    angle: 90,
                    spread: 80,
                    origin: { x: Math.random() },
                    shapes: ['heart', 'star'],
                    scalar: 1.5
                });
            }, 250);
        }

        // Attach finale event listener
        document.getElementById('finale-button').addEventListener('click', startFinale);


        // --- 6. INITIALIZATION ---

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Three.js hearts background
            initThree();
            animateHearts(0);

            // Pre-set all steps but the first one
            steps.slice(1).forEach(setInitialStepState);
            
            // Animate in the first step
            animateStepIn(steps[0]);
            updateProgressBar(currentStep);
        });
    </script>
</body>
</html>
